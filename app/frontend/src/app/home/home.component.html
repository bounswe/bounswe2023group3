<html lang="en">
  <body style="padding-top: 80px;">
    <app-header></app-header>
    <div class="page-layout">
      <app-side-bar></app-side-bar>
      <div class="container" style="padding: 40px; justify-self: center; margin-left: 240px; margin-right: 260px;">
        <div style="text-align: right">
          <button
            class="button"
            style="
              width: 100px;
              display: inline-block;
              margin-right: 5px;
              border: none;
              background-color: #63989f;
              color: #fff;
              transition: background-color 0.2s;
              cursor: pointer;
            "
            (click)="settledPolls(false)"
            onmouseover="this.style.backgroundColor='#486c73';"
            onmouseout="this.style.backgroundColor='#63989f';"
          >
            Ongoing
          </button>
          <button
            class="button"
            style="
              width: 100px;
              display: inline-block;
              background-color: #374968;
              border: none;
              color: #fff;
              transition: background-color 0.2s;
              cursor: pointer;
            "
            (click)="settledPolls(true)"
            onmouseover="this.style.backgroundColor='#202A40';"
            onmouseout="this.style.backgroundColor='#374968';"
          >
            Settled
          </button>
        </div>

        <form
          action="/search"
          method="GET"
          style="margin-bottom: 15px; margin-top: 20px"
        >
          <div style="position: relative">
            <img
              src="assets/search-icon.png"
              alt="Search Icon"
              style="
                position: absolute;
                left: 10px;
                top: 50%;
                transform: translateY(-50%);
                width: 18px;
                height: 18px;
              "
            />
            <input
              id="searchInput"
              style="border-radius: 15px; text-align: left; padding-left: 30px; cursor: pointer;"
              placeholder="What are you looking for?"
            />
          </div>
        </form>

        <div class="user-polls">
          <button
            class="user-polls-column"
            [class.blurred]="!isAuthenticated"
            [class.underlined]="clickedButton === 'following'"
            (click)="followingPolls()"
          >
            Following
          </button>
          <button 
            class="user-polls-column"
            [class.underlined]="clickedButton === 'trending'"
            (click)="trendingPolls()"
          >
            Trending
          </button>
        </div>
        

        <div>
          <ng-container *ngFor="let poll of polls">
            <ng-container *ngIf="!settledMode; else settledPoll">
              <app-poll [pollId]="poll.id"></app-poll>
            </ng-container>
            <ng-template #settledPoll>
              <app-settled-poll [pollId]="poll.id"></app-settled-poll>
            </ng-template>
          </ng-container>
        </div>
        <app-scroll-to-top-button></app-scroll-to-top-button>
      </div>
      <div class="fixed-elements">
        <app-tags-bar></app-tags-bar>
        <app-leaderboard-bar></app-leaderboard-bar>
      </div>
    </div>
  </body>
</html>
